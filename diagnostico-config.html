<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico - Config.js</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold text-gray-900 mb-6">üîç Diagn√≥stico de Configura√ß√£o</h1>
        
        <div id="resultado" class="space-y-4"></div>
        
        <div class="mt-6">
            <button onclick="location.reload()" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">
                üîÑ Recarregar e Verificar Novamente
            </button>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        const resultado = document.getElementById('resultado');
        
        function adicionarItem(titulo, valor, tipo = 'info') {
            const cores = {
                success: 'bg-green-50 border-green-200 text-green-800',
                error: 'bg-red-50 border-red-200 text-red-800',
                warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',
                info: 'bg-blue-50 border-blue-200 text-blue-800'
            };
            
            const div = document.createElement('div');
            div.className = `border rounded-lg p-4 ${cores[tipo]}`;
            div.innerHTML = `<strong>${titulo}:</strong> ${valor}`;
            resultado.appendChild(div);
        }

        // Verificar se window.QUESTIONARIO_CONFIG existe
        if (typeof window.QUESTIONARIO_CONFIG === 'undefined') {
            adicionarItem('‚ùå Erro Cr√≠tico', 'window.QUESTIONARIO_CONFIG n√£o est√° definido. O arquivo config.js pode n√£o estar carregando.', 'error');
            adicionarItem('Solu√ß√£o', 'Verifique se o arquivo config.js existe e est√° no mesmo diret√≥rio.', 'warning');
        } else {
            adicionarItem('‚úÖ Config.js', 'Arquivo carregado com sucesso', 'success');
            
            const CONFIG = window.QUESTIONARIO_CONFIG;
            
            // Verificar URL
            if (CONFIG.SUPABASE_URL) {
                adicionarItem('‚úÖ SUPABASE_URL', CONFIG.SUPABASE_URL, 'success');
            } else {
                adicionarItem('‚ùå SUPABASE_URL', 'N√ÉO CONFIGURADO', 'error');
            }
            
            // Verificar chave an√¥nima
            if (CONFIG.SUPABASE_ANON_KEY) {
                if (CONFIG.SUPABASE_ANON_KEY.trim() === '') {
                    adicionarItem('‚ùå SUPABASE_ANON_KEY', 'STRING VAZIA - Preencha no config.js', 'error');
                } else {
                    adicionarItem('‚úÖ SUPABASE_ANON_KEY', `${CONFIG.SUPABASE_ANON_KEY.substring(0, 30)}... (${CONFIG.SUPABASE_ANON_KEY.length} caracteres)`, 'success');
                }
            } else {
                adicionarItem('‚ùå SUPABASE_ANON_KEY', 'N√ÉO CONFIGURADO', 'error');
            }
            
            // Verificar quest√µes
            if (CONFIG.QUEST√ïES && Array.isArray(CONFIG.QUEST√ïES)) {
                adicionarItem('‚úÖ QUEST√ïES', `${CONFIG.QUEST√ïES.length} quest√µes configuradas`, 'success');
            } else {
                adicionarItem('‚ö†Ô∏è QUEST√ïES', 'N√£o encontradas ou formato inv√°lido', 'warning');
            }
            
            // Verificar metodologia
            if (CONFIG.METODOLOGIA) {
                adicionarItem('‚úÖ METODOLOGIA', 'Configurada', 'success');
            } else {
                adicionarItem('‚ö†Ô∏è METODOLOGIA', 'N√£o encontrada', 'warning');
            }
            
            // Teste de cria√ß√£o do cliente Supabase (se biblioteca estiver carregada)
            if (typeof supabase !== 'undefined') {
                try {
                    const { createClient } = supabase;
                    const testClient = createClient(
                        CONFIG.SUPABASE_URL || 'https://test.supabase.co',
                        CONFIG.SUPABASE_ANON_KEY || ''
                    );
                    adicionarItem('‚úÖ Biblioteca Supabase', 'Carregada e funcionando', 'success');
                } catch (e) {
                    adicionarItem('‚ùå Biblioteca Supabase', `Erro: ${e.message}`, 'error');
                }
            } else {
                adicionarItem('‚ö†Ô∏è Biblioteca Supabase', 'N√£o carregada nesta p√°gina', 'warning');
            }
        }
        
        // Mostrar conte√∫do completo do CONFIG (para debug)
        const debugDiv = document.createElement('div');
        debugDiv.className = 'mt-6 border rounded-lg p-4 bg-gray-50';
        debugDiv.innerHTML = `
            <h3 class="font-semibold mb-2">Debug - CONFIG Completo:</h3>
            <pre class="text-xs overflow-auto max-h-64">${JSON.stringify(window.QUESTIONARIO_CONFIG || 'N√ÉO DEFINIDO', null, 2)}</pre>
        `;
        resultado.appendChild(debugDiv);
    </script>
</body>
</html>

